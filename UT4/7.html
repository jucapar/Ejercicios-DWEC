<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>UT4- Ejercicio 7 Juan Carlos Pastor Regueras</title>
</head>
<body>
	<form name="formulario" action="#" method="post" id="formulario">
		

	<label for="numero">Numero Tarjeta</label>
	<input id="numero" type="text" name="numero" />
				<select id="lista">
			<option value="">-</option>
  <option value="MasterCard">MasterCard</option>
  <option value="Visa">Visa</option>
  <option value="AmericanExpress">AmericanExpress</option>
  <option value="Discover">Discover</option>
</select>
			
			<button name="enviar"  id="enviar">Enviar</button>
	</form>
	<p id="texto">
		
	</p>
</body>
<script>

	window.onload = function(){
		var lista = document.getElementById("lista");
		lista.addEventListener("change",tipoTarjeta);
		
	}
	
	function tipoTarjeta(evt){
		
		var enviar = document.getElementById("enviar");
		enviar.addEventListener("click",validacion(evt.target.value));
	}
	
	function validacion(tarjeta){
		var exp_reg;
	
	
	switch(tarjeta){
			case "Visa":
				exp_reg = /^(?:4[0-9]{12}(?:[0-9]{3})?)$/;
						
			break;
			case "MasterCard":
				exp_reg = /^(?:5[1-5][0-9]{14})$/;
			
			break;
			case "AmericanExpress":
				exp_reg =  /^(?:3[47][0-9]{13})$/;
			
			break;
			case "Discover":
				exp_reg = /^(?:6(?:011|5[0-9][0-9])[0-9]{12})$/;
			break;
			
			default:
			break;
		}
		
		console.log("La expresion regular es:" + exp_reg);
		var numTarjeta = document.getElementById("numero").value;
		console.log(numTarjeta);
		if(!exp_reg.test(numTarjeta)){
			console.log("El numero de tarjeta no es valido");
			document.write("El numero de tarjeta no es valido");
			
			
		}
		else{
			console.log("Numero de tarjeta valido");
			document.write("Numero de tarjeta valido");
		}
		
	
	}
	
	
	
</script>
</html>
